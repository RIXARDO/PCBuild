@model PCbuild_ASP.MVC_.Domain.Entities.BuildEntity

@{
    ViewBag.Title = "Index";
}


<h2>Index</h2>



<script src="~/Scripts/Build/BuildView.js"></script>



@using (Ajax.BeginForm("Action", "Build", new AjaxOptions { UpdateTargetId = "results", HttpMethod = "Post" }))
{
    bool cpuIntel = true, cpuAMD = false;
    bool gpuNvidia = true, gpuAMD = false;

    if (Model != null && Model.CPU != null && Model.GPU != null)
    {
        if (Model.CPU.Manufacture == "Intel")
        {
            cpuIntel = true;
            cpuAMD = false;
        }
        else
        {
            cpuIntel = false;
            cpuAMD = true;
        }

        if (Model.GPU.Manufacture == "Nvidia")
        {
            gpuNvidia = true;
            gpuAMD = false;
        }
        else
        {
            gpuNvidia = false;
            gpuAMD = true;
        }
    }
    <table class="table">
        <tr>
            <td>CPU</td>
            <td>GPU</td>
            <td>Screen</td>
        </tr>

        <tr>
            <td>
                @Html.RadioButton("CPU", "Intel", cpuIntel, new { @OnChange = "onchangeCPU(this)" })
                <span>Intel</span>
            </td>
            <td>
                @Html.RadioButton("GPU", "Nvidia", gpuNvidia, new { @OnChange = "onchangeGPU(this)" })
                <span>Nvidia</span>
            </td>
            <td>
                @Html.RadioButton("ScreenRez", "p1080", true)
                <span>1080p</span>
            </td>


        </tr>
        <tr>
            <td>
                @Html.RadioButton("CPU", "AMD", cpuAMD, new { @OnChange = "onchangeCPU(this)" })
                <span>AMD</span>
            </td>
            <td>
                @Html.RadioButton("GPU", "AMD", gpuAMD, new { @OnChange = "onchangeGPU(this)" })
                <span>Radeon</span>
            </td>
            <td>
                @Html.RadioButton("ScreenRez", "p1440")
                <span>1440p</span>
            </td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td>
                @Html.RadioButton("ScreenRez", "p2560")
                <span>2560p</span>
            </td>
        </tr>
        <tr>
            <td>
                <select id="CPUs" name="CPUs">
                    <option></option>
                </select>
                @*@Html.DropDownListFor(x => x.CPUs, new SelectList(Model.CPUs.Where(x => x.Manufacture == "Intel").
                    AsEnumerable(), "CPUID", "ProcessorNumber"), new { @OnChange = "onchangeCPUid()" })*@

            </td>
            <td>
                <select id="GPUs" name="GPUs">
                    <option></option>
                </select>
                @*@Html.DropDownListFor(x => x.GPUs, new SelectList(Model.GPUs.Where(x => x.Manufacture == "Nvidia").
                    AsEnumerable(), "GPUID", "Name"), new { @OnChange = "onchangeGPUid()" })*@
            </td>
        </tr>
    </table>

    <input type="submit" value="Action" class="btn btn-default" />
}

@using (Html.BeginForm("SaveBuild", "User", FormMethod.Post))
{
    @Html.Hidden("BuildId", "0");
    @Html.Hidden("CPUid");
    @Html.Hidden("GPUid");
    <input type="submit" value="Save" class="btn btn-default" onclick="onclickSave()" />
}


@section scripts{
    @Scripts.Render("~/scripts/jquery-3.3.1.min.js")
    @Scripts.Render("~/scripts/jquery.unobtrusive-ajax.min.js")
    @*@Scripts.Render("~/scripts/BuildView.js")*@
}

<div id="results"></div>
<script>
    @{
        bool sel = true;
        if (Model == null)
        {
            sel = false;
        }
    }
    if (@sel) {
        $("#CPUs").val("@Model.CPUID");
        $("#GPUs").val("@Model.GPUID");
        $("#BuildId").val("@Model.BuildEntityID");

    }
</script>